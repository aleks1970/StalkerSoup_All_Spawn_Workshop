; Авторы:
; модель, анимации, Maya : vadyan
; конфиг : lsclon
; настройка анимаций, компиляция в SDK : BFG
;===========================================================================
; Spider
;===========================================================================
[spider_small]:monster_base
GroupControlSection		= spawn_group
SpaceRestrictionSection		= space_restrictor,zone_mosquito_bald
;$spawn				= "monsters\boars\spider_small"
$npc				= on
$prefetch			= 16
visual				= monsters\spider\spider_small
corpse_visual			= monsters\spider\spider_dead
icon				= ui_npc_monster_spider_small


;------------------------------------------------------------------------
; Offline Alife
;------------------------------------------------------------------------
Scheduled			= on
Human				= off
Health				= 200
MinSpeed			= 1.0
MaxSpeed			= 5.0
going_speed			= 2
current_level_going_speed	= 1
search_speed			= 1.5

MaxHealthValue			= 400                ; range [0..200]
DynamicObjectsCount		= 32
smart_terrain_choose_interval	= 00:15:00
Spawn_Inventory_Item_Section	= mutant_spider_part
Spawn_Inventory_Item_Probability = 1
Spawn_Inventory_Item_Probability_onDeath = 1.0

;------------------------------------------------------------------------
; Physics
;------------------------------------------------------------------------
ph_box0_center			= 0.0,  0.6,  0.0
ph_box0_size			= 0.55, 0.6,  0.55
ph_box1_center			= 0.0,  0.6,  0.0
ph_box1_size			= 0.55, 0.6,  0.55
ph_crash_speed_min		= 10
ph_crash_speed_max		= 30
ph_collision_damage_factor	= 0.1
ph_mass				= 250

destroyed_vis_name		= physics\dead_body\skelet_crash_monster

;---------------------------------------------------------------------
ph_skeleton_airr_lin_factor	= 2.0
ph_skeleton_airr_ang_factor	= 0.0
ph_skeleton_hinger_factor1	= 1.0
ph_skeleton_ddelay		= 15.0

ph_skel_fatal_impulse_factor	= 12.0
ph_after_death_velocity_factor	= 0.75
ph_skel_shot_up_factor		= 0.25
;---------------------------------------------------------------------

;------------------------------------------------------------------------
; Movement
;------------------------------------------------------------------------

; speed factors     linear | angular_real | angular_path | min   |  max
Velocity_Stand			= 0,	1.4,	1.4,	1,	1 
Velocity_RunFwdNormal		= 6.0,	3.5,	3.5,	0.4,	1 
Velocity_RunFwdDamaged		= 5.0,	3.0,	3.0,	0.2,	1
Velocity_WalkFwdDamaged		= 3.0,	2.5,	2.5,	0.2,	2.0 
Velocity_WalkFwdNormal		= 4.5,	2.5,	2.5,	0.02,	3.0 
Velocity_Drag			= -1.0,	1.0,	1.0,	1,	1	
Velocity_Steal			= 1.5,	3.0,	3.0,	1,	1

; acceleration
Accel_Generic			= 1.5
Accel_Calm			= 2.5
Accel_Aggressive		= 6.5

;------------------------------------------------------------------------
; Attack
;------------------------------------------------------------------------

attack_effector			= m_spider_small_attack_effector
attack_params			= m_spider_small_attack_params
;attack parameters
MinAttackDist			= 2.6 
MaxAttackDist			= 3.2
as_min_dist			= 1.4
as_step				= 0.5

Run_Attack_Dist			= 3.5,    4.0
Run_Attack_Delay		= 1000,   3000

Melee_Rotation_Factor		= 2.2

hit_type			= wound


;------------------------------------------------------------------------
; Conditions
;------------------------------------------------------------------------


satiety_v			= 0.0005		;скорость уменьшения сытости со временем
radiation_v			= 0.00001		;скорость уменьшения радиации
satiety_power_v			= 0.00001		;увеличение силы при уменьшении сытости 
satiety_health_v		= 0.001			;увеличение здоровья при уменьшении сытости 
satiety_critical		= -1.0			;критическое значения сытости (в процентах от 0..1) когда здоровье начианает уменьшаться
radiation_health_v		= 0.00			;уменьшение здоровья при воздействии радиации
morale_v			= 0.01			;скорость восстановления морали
health_hit_part			= 1.0			;процент хита, уходящий на отнимание здоровья
power_hit_part			= 1.0			;процент хита, уходящий на отнимание силы
psy_health_v			= 0.1			;скорость восстановления psy-здоровья
health_restore_v		= 0.0005

;Immunities 
immunities_sect			= spider_small_immunities

;открытые раны
bleeding_v			= 0.05			;потеря крови при номинальной ране в секунду
wound_incarnation_v		= 0.04			;крутизна кривой заживления (какой процент раны останется после заживления в игровую секунду)
min_wound_size			= 0.01

;Sleep Settings
sleep_health			= 1.0
sleep_power			= 1.0
sleep_satiety			= 1.0
sleep_radiation			= 1.0
sleep_psy_health		= 1.0

;Eat settings
eat_freq			= 5.0
eat_slice			= 0.01
eat_slice_weight		= 10.0

satiety_threshold		= 0.5			; below this value monster fill hunger

;------------------------------------------------------------------------
; Sound
;------------------------------------------------------------------------

sound_idle			= monsters\spider_small\spider_idle_
sound_eat			= monsters\spider_small\spider_eat_
sound_aggressive		= monsters\spider_small\spider_aggressive
sound_attack_hit		= monsters\spider_small\spider_attack
sound_take_damage		= monsters\spider_small\spider_pain
sound_die			= monsters\spider_small\spider_death
sound_bkgnd			= monsters\biting\def_
sound_threaten			= monsters\spider_small\spider_threaten
sound_landing			= monsters\spider_small\spider_death
sound_steal			= monsters\biting\def_
sound_panic			= monsters\spider_small\spider_panic 
sound_growling			= monsters\biting\def_
sound_die_in_anomaly		= monsters\spider_small\spider_anomaly_deat

killer_clsids       = Z_MINCER,Z_GALANT,ZS_BFUZZ,ZS_MBALD,ZS_GALAN,ZS_MINCE

sound_distant_idle		= monsters\spider_small\spider_idle_dis
distant_idle_sound_delay	= 80000
distant_idle_sound_range	= 100.0 

;Frequency of sounds to be played
idle_sound_delay		= 18000
eat_sound_delay			= 5000
attack_sound_delay		= 4000

SoundThreshold			= 0.06			; range [0..1]
max_hear_dist			= 60

;------------------------------------------------------------------------
; Vision
;------------------------------------------------------------------------
eye_fov				= 110
eye_range			= 40

min_view_distance		= 0.5			; коэффициент, который множится на eye_range, в зависимости от угла
max_view_distance		= 1.0			; коэффициент, который множится на eye_range, в зависимости от угла
visibility_threshold		= 100.0			; значение, при достижении суммой которого объект считается видимым
always_visible_distance		= 0.3
time_quant			= 0.001
decrease_value			= 0.01			; значение, на которое уменьшается вес, если объект попал в фрустум, но отсёкся по каким-то причинам
velocity_factor			= 0.5
luminocity_factor		= 0.5			; фактор освещения (только для Актёра)
transparency_threshold		= 0.25

;-------------------------------------------------------------------------
; Morale
;-------------------------------------------------------------------------
Morale_Hit_Quant		= 0.02
Morale_Attack_Success_Quant	= 0.1
Morale_Take_Heart_Speed		= 0.1
Morale_Despondent_Speed		= 0.1
Morale_Stable_Speed		= 0.05
Morale_Despondent_Threashold	= 0.5

;-------------------------------------------------------------------------
; Damages
;-------------------------------------------------------------------------
;Health from which to play injured animation
DamagedThreshold		= 0.2
damage = spider_small_damage


critical_wound_threshold	= 0.4
critical_wound_decrease_quant	= 0

critical_wound_anim_head	= critical_hit_head_0
critical_wound_bones_head	= spider_small_critical_wound_bones_head

critical_wound_anim_torso	= critical_hit_torso_0
critical_wound_bones_torso	= spider_small_critical_wound_bones_torso

critical_wound_anim_legs	= critical_hit_torso_0
critical_wound_bones_legs	= spider_small_critical_wound_bones_legs

ef_creature_type		= 11
ef_weapon_type			= 2
ef_detector_type		= 1
panic_threshold			= 0.1

cform				= skeleton
class				= SM_BOARW

script_binding			= bind_monster.bind

bone_torso			= bip01_spine
bone_head			= bip01_head
bone_fire			= bip01_head
weapon_usage			= 0

Spawn_Inventory_Item_Section = mutant_spider_part
Spawn_Inventory_Item_Probability = 1

actor_restrictor		= medium_monster ;medium_monster,stalker,none

step_params			= m_spider_small_step_params
LegsCount			= 4

DayTime_Begin			= 0
DayTime_End			= 24

distance_to_corpse		= 2.1

terrain = spider_small_terrain


material			= creatures\hoof
DynamicObjectsCount		= 32

;species of monster
species				= spider
rank				= 0
spec_rank			= weak
community			= spider


;===========================================================================
; ATTACK PARAMS
;===========================================================================
[m_spider_small_attack_params]
;---------------------------------------------------------------------------------------------------------------------------------------------
;	anim			| time[0..1] | hit_power | impulse | impulse_dir (x,y,z) | Field of hit_test  (left,right, bottom, top ) |	Test Dist
;---------------------------------------------------------------------------------------------------------------------------------------------
;Bite
stand_attack_0			= 0.15,		0.70,		100,		0.0, 0.5, 0.5,			-0.6, 0.6, -0.6, 0.6,						3.2
;Bite2
stand_attack_1			= 0.20,		0.65,		130,		0.0, 0.5, 0.5,			-0.6, 0.6, -0.6, 0.6,						3.2
;Right Leg Attack
stand_attack_2			= 0.20,		0.70,		150,		0.0, 1.0, 2.0,			-0.6, 0.6, -0.6, 0.6,						3.2
;stand_attack_run_0		= 0.10,		0.75,		180,		1.0, 0.0, 1.0,			-0.6, 0.6, -0.6, 0.6,	

;===========================================================================
; SPECIAL EFFECTORS
;===========================================================================
[m_spider_small_attack_effector]

duality_h			= 0.05
duality_v			= 0.02
blur				= 0.01
gray				= 0.5
noise_intensity			= 0.0
noise_grain			= 1
noise_fps			= 30
color_base			= 0.65,0.15,0.1
color_gray			= 0.333,0.333,0.333
color_add			= 0,0,0
time				= 0.30
time_attack			= 0.05			; fade in
time_release			= 0.15			; fade out

; camera effects
ce_time				= 0.35			; time 
ce_amplitude			= 10			; head shake after hit
ce_period_number		= 2.0			; camera shake times
ce_power			= 2.5; 2.0		; power 

;=================================================================================
; Spider Damage
;=================================================================================
[spider_small_damage]
;bone_name		 = <hit_scale>,-1,<wound_scale>
;<hit_scale>	- коэфф. изменения хита (уменьшения здоровья) 
;<wound_scale>	- коэфф. изменения величины открытой раны

default				= 1, -1, 0.3

bip01_pelvis			= 1, -1, 0.3
bip01_spine 			= 1, -1, 0.3
bip01_head 			= 2, -1, 0.3, 10

[spider_small_critical_wound_bones_head]
bip01_pelvis
bip01_l_leg
bip01_l_leg01
bip01_l_leg02
bip01_l_thigh01
bip01_l_calf01
bip01_l_foot01
bip01_l_toe02
bip01_l_toe03
bip01_l_thigh04
bip01_l_calf04
bip01_l_foot04
bip01_l_toe09
bip01_l_toe08
bip01_r_leg
bip01_r_leg01
bip01_r_leg02
bip01_r_thigh01
bip01_r_calf01
bip01_r_foot01
bip01_r_toe02
bip01_r_toe03
bip01_r_thigh04
bip01_r_calf04
bip01_r_foot04
bip01_r_toe09
bip01_r_toe08
bip01_spine
bip01_head
bip01_l_thigh02
bip01_l_calf02
bip01_l_foot02
bip01_l_toe04
bip01_l_toe05
bip01_l_thigh03
bip01_l_calf03
bip01_l_foot03
bip01_l_toe06
bip01_l_toe07
bip01_r_thigh02
bip01_r_calf02
bip01_r_foot02
bip01_r_toe04
bip01_r_toe05
bip01_r_thigh03
bip01_r_calf03
bip01_r_foot03
bip01_r_toe06
bip01_r_toe07
bip01_tail1
bip01_tail2
bip01_tail3

[spider_small_critical_wound_bones_torso]
[spider_small_critical_wound_bones_legs]

;=================================================================================
; Spider Terrain
;=================================================================================
[spider_small_terrain]
255,000,255,255
001,002,000,000 ;Cordon
008,001,000,000 ;Bar
010,001,000,000 ;Amber
012,001,000,000 ;Military

;===========================================================================
; Step Events
;===========================================================================
[m_spider_small_step_params]
   
;-------------------------------------------------------------------------------------------------------------
; anim		    | Cycles | time1 | power1 | time2 | power2 | time3 | power3 | time4 | power4 |
;-------------------------------------------------------------------------------------------------------------
stand_walk_fwd_0	= 5,    0.01,	1,	0.5,	0.7,	0.15,	1.0,	0.5,	1.0
tand_walk_fwd_dmg_0	= 5,    0.01,	1,	0.5,	0.7,	0.15,	1.0,	0.5,	1.0
stand_walk_dmg_0	= 4,	0.2,	1,	0.25,	0.7,	0.5,	1.0,	0.7,	1.0
stand_run_fwd_0		= 1,	0.01,	1,	0.05,	0.7,	0.2,	1.0,	0.2,	0.2
stand_run_dmg_0		= 4,	0.2,	1,	0.25,	0.7,	0.7,	1.0,	0.7,	1.0
stand_steal_0		= 1,	0.2,	1,	0.25,	0.7,	0.7,	1.0,	0.7,	1.0
stand_drag_0		= 1,	0.2,	1,	0.25,	0.7,	0.7,	1.0,	0.7,	1.0


;===========================================================================
; IMMUNITIES
;===========================================================================
[spider_small_immunities]
burn_immunity		= 0.1
strike_immunity		= 0.05
shock_immunity		= 0.01
wound_immunity		= 0.05
radiation_immunity	= 0.0
telepatic_immunity	= 0.0
chemical_burn_immunity	= 0.1
explosion_immunity	= 0.08
fire_wound_immunity	= 0.02

[spider_small_weak]:spider_small
$spawn			="monsters\spiders\spider_small_weak"
;visual			= monsters\spider\spider_small
;corpse_visual	= monsters\spider\spider_small_dead
rank 			= 1
spec_rank 		= weak

[spider_small_normal]:spider_small
$spawn			="monsters\spiders\spider_small_normal"
visual			= monsters\spider\spider_small
corpse_visual	= monsters\spider\spider_small_dead
Health 			= 150
MaxHealthValue 	= 200
;DayTime_Begin 	= 23
;DayTime_End 	= 20
panic_threshold = 0
rank 			= 301
spec_rank 		= normal

[spider_small_strong]:spider_small
$spawn			="monsters\spiders\spider_small_strong"
visual			= monsters\spider\spider_small_strong
corpse_visual	= monsters\spider\spider_strong_dead
Health 			= 200
MaxHealthValue 	= 250
;DayTime_Begin 	= 7
;DayTime_End 	= 4
panic_threshold = 0
rank 			= 601
spec_rank 		= strong